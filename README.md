用AI写了一个程序接入的这位UP@白菜工厂1145号员工制作的整合包中的API 

该位UP的教程(其中包含相关模型下载)：
https://www.yuque.com/baicaigongchang1145haoyuangong/ib3g1e

整合包：[BV1F94y1K724 ](https://www.bilibili.com/video/BV1F94y1K724/)

选项卡1
![屏幕截图 2024-10-24 223920](https://github.com/user-attachments/assets/f19210fb-5c3c-4848-a4a7-630d64f7cfd0)
可进行基本的文本转语音，主要用来进行配音前选择角色模型

10/24更新：添加选择参考音频后自动填充“提示文本”，“参考语言”和“生成语言”的功能

——————————————————————————————————

选项卡2
![屏幕截图 2024-10-24 215223](https://github.com/user-attachments/assets/e7fa4e57-c107-4daa-8f8a-5b9707713aaa)
注意：右侧一栏可以用滚轮或滚动条滚动，全屏后外观如下
![屏幕截图 2024-10-24 215232](https://github.com/user-attachments/assets/5a0e3e7b-91e3-4deb-ac05-95671096db92)
左侧为文本排版转换和预处理，处理中文排版的小说的时候四个复选框都要勾上，日语排版的小说的时候勾上后两个即可，第二个可勾可不勾。



右侧第一栏为自动分章，可自动识别以下八种章节标号并按对应的标号进行分章以及可设置几个章节一切

可识别的章节标号格式：“第一章”，“第一话”，“第1章”，“第1话”，“第01章”，“第01话”，“第001章”，“第001话”

可识别的章节数量为999章以内



右侧第二栏为辅助AI标记角色

1.需要将分好章的文档（对于使用ChatGPT来说分好章的文档的行数最好控制在300行以内）的内容复制给ChatGPT一类的大语音模型AI并在内容前面加上以下前缀：

以下故事中使用「」符号表示角色说的话，对以下故事按如下标准进行标注：判断用「」符号括起来的行是哪个角色说的话并在行前以

”角色名@：「对话内容」“

的格式标注他的名称或代称，不要落下”我“说的话（在”我“说的话前面把”我“作为角色名），没有名字的角色标注职业或其他角色对其的称呼或路人等名称并用相同的格式在行前标注。不要落下任何被「」符号括起来的内容。删除没被「」符号括起来的内容。

使用以上前缀基本上AI的第一次回答就能有7到8成的准确率不满意的话可以多让AI回答几次，注意文章中不要包含违禁词或相关场景的描写，有的话可能导致生成失败（注册用户多试几次有可能成功）。

2.AI生成出大致满意的内容后把回答的文本复制到一个新建的文档中并保存，在程序中”未标注角色名路径“选择章节原文，”对话标注角色名文本路径“选择刚才保存的包含AI生成内容的文档，点击开始标注后会把AI标注的角色名添加到原文中并保存到”未标注角色名路径“下原文后面加”marked“的文档中。用AI标记很难做到百分比准确，要求比较高的话在标记完后可以手动校对一下。



右侧第三栏（可选）为章节合并，可自动识别一个文件夹里各文档的名称中的序号并按顺序合成为一个文档，文件夹中不要包含多余的文档。



右侧第四栏为生成各角色要读的文档和顺序表，在导入完成标记的文档之前需要检查以下这几个符号使用的是否正确“@”， “：”， “「”， “」”以下为正确的符号的示例文本：

刹那@:「嗯。刹那很期待。」

以下为错误的符号的示例文本（AI一般会使用这种符号）：

刹那@：「嗯。刹那很期待。」

最好使用notepad++一类的软件的替换功能把完成标记的文档中上述4种符号都分别替换为正确的符号示例文本中使用的符号，这4个符号在源代码中也能找到。

分句符号是一个会被添加到各角色要读的文档中的符号，用来将文本分块进行合成，需要保证原文本中不存在这个符号且直到合成完成所有的步骤都要使用相同的符号。我建议使用“|”

”不在同一段中添加分句符“功能勾上的情况生成大段的速度更快但容易出现读错的情况且一定要在生成时选择一种分句内切割方式否则生成大段文字时会出现部分内容没读的情况

——————————————————————————————————

选项卡3
![屏幕截图 2024-10-24 215308](https://github.com/user-attachments/assets/605d48a3-de1a-4b0b-8b79-3bb870544e53)
注意：列表可以横向和纵向滚动
![屏幕截图 2024-10-24 215256](https://github.com/user-attachments/assets/d2e1c975-3648-4f23-8407-465939899430)
10/24更新：1.优化列表布局 2.重写整个UI及多数函数，解决了旧版本中创建多余的默认frame所可能造成的所有问题 3.添加“配置角色”和“选择配置”下拉栏，可以通过在选项卡4中选择包含多个角色的文件夹来快速选择预设配置及参考音频（新的下拉栏可以通过在下拉栏上滚动鼠标来快速切换选项，也可以点击下拉栏右侧的下箭头来打开选项列表） 3.调换了生成音频和合并音频按钮的位置 4.优化了进度条的逻辑，现在应该不会出现进度条超过100%的情况了 5.为单独生成角色语音的操作添加进度条的支持 6.添加了更多报错提示 7.添加了防止其他操作占用API的措施，现在只能有一个操作占用API 8.修复了“无参考模式”选项不生效的问题 9.添加自动填充功能

使用选项卡3前需要先把选项卡2右侧第三栏生成的各角色要读的文档和顺序表文件单独放到一个空文件夹内，其中不要包含多余的.txt文档。在选项卡3中选择该文件夹后会自动列出其中的各个角色和对应的参数选项可以对每个角色分别设置模型和对应的参数。在开始设置各个角色的参数前先要刷新模型，之后可以依此填写给参数。选择完一个角色的模型后要点击确认模型的按钮，这样参考语言和合成语言的选项列表才能出现，10/24更新后如果参考语言和合成语言被自动填充了且填充正确或不需要手动修改则可不点击确认模型按钮，同样只要语音选项被填充了不管用任意方式导入配置只要不需要修改语言就也不需要确认模型。

如果很多角色都要用同一个参数的话可以在一开始先设置默认项，之后使用”应用默认值“将默认项的参数应用到每一项，之后在特别调整不同参数的角色配置即可。

都改完后最好导出一下配置，这样就算出问题了重启完程序也能一键导入配置不用再重新填一遍了。导出的配置文件可以通过修改文件名称给其它角色使用，要求配置文件的名称与角色名相同即可。·	

完成上述操作确保所有角色的参数都填写完整后即可点击”生成语音按钮

（注意不是”合并语音“）来生成一个包含每个角色进行分角色朗读的音频文件。

如果合成结束后提示有一些角色的语音合成失败，你需要单独合成那些角色的语音（“生成角色语音”按钮），在合成完毕后点击合并语音

关于生成完成之后的校对工作，可以听一遍合成出的全文哪句读错了就去选项卡3最开始选择的文件夹中的AudioCache文件夹里找到对应的句子的音频以及角色对应的文本然后用选项卡1合成要修改的句子替换掉AudioCache里读错的句子最后使用选项卡3中的”合并语音“按钮来合成完整语音。当然你也可以选择使用角色选项中的“生成角色语音”按钮直接重新合成读错了的角色的全部语音然后使用”合并语音“按钮来合成完整语音。

——————————————————————————————————

选项卡4
![屏幕截图 2024-10-24 220802](https://github.com/user-attachments/assets/620f2d87-32e9-4461-b2af-7ae085cd231f)
注意：列表可以横向和纵向滚动
![屏幕截图 2024-10-24 215613](https://github.com/user-attachments/assets/350acf5a-e630-4f95-96b1-9d8e8ccaff13)
添加角色管理器页面，在这里可以快捷创建预设配置并给到选项卡3以供快捷导入，你需要选择一个文件夹，将各个角色的参考音频，头像，及配置文件分别存放到各角色名对应的文件夹下，对各角色对应的文件夹的内容要求为：

1.头像文件会优先选择avatar.png文件，如果不存在的话会优先选择文件夹内最接近1:1比例的图片

2.配置文件都要求直接放置在各角色文件夹内，放置到子文件夹内则不识别

3.参考音频可以放置到子文件夹内，可支持三种命名格式：

第一种“【标注】提示文本.wav”举例：“【难过_sad】「震荡」？好官方的说法，还真是轻描淡写啊。.wav”
第二种"标注#提示语言#提示文本.wav"举例：“难过#zh#习惯了网络漫游，反而不适应正常的交通工具了…….wav”
第三种“提示文本.wav”举例：“有句话是怎么说的来着…哦对了，「学好数理化，AI入职公司都不怕！」.wav”
 导出配置时配置文件的名称会以“配置名称”一栏的内容命名，你可以手动修改该名称，其余的操作都与选项卡3相同
